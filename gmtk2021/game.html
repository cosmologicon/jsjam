<!DOCTYPE html>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0">
<title>GMTK 2021 game</title>
<script src="UFX.js"></script>
<script src="piece.js"></script>
<script src="play.js"></script>
<script src="graphics.js"></script>
<canvas id=canvas></canvas>
<style>
canvas { background: black }
</style>
<script>
"use strict"
let DEBUG = window.location.href.includes("DEBUG")
let tau = 2 * Math.PI
let clamp = (x, a, b) => x < a ? a : x > b ? b : x
let mod4 = x => (x % 4 + 4) % 4
let canvas = document.getElementById("canvas")
canvas.width = 1600
canvas.height = 900
let context = canvas.getContext("2d")
UFX.maximize.fill(canvas, "aspect")
UFX.draw.setcontext(context)
UFX.key.init()

function draw(obj) {
	context.save()
	obj.draw()
	context.restore()
}

UFX.scenes.loading = {
	think: function (dt) {
		UFX.draw("fs #446666 f0")
		let ratio = canvas.width / 1600
		UFX.draw("[ z", ratio, ratio)
		UFX.draw("[ font 100px~'Viga' tab center middle fs #aaaaaa t 800 400 ft0 GMTK~2021~game ]")
		UFX.draw("[ font 40px~'Viga' tab left bottom fs #aaaaaa t 20 880")
		context.fillText(UFX.ticker.getrates(), 0, 0)
		UFX.draw("]")
		UFX.draw("]")
	},
}

UFX.scene.init({ minups: 10, maxups: 120 })
UFX.scene.push("loading")
UFX.resource.onload = function () {
	UFX.scene.swap("play")
}
UFX.resource.loadwebfonts("Viga")

</script>
